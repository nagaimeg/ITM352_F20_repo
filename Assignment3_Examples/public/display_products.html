<!--followed getting started with Assignment1 html copied SmartPhoneProducts 3 and w3 template-->
<!--Author: Meghan Nagai-->
<head>
    <script src="./functions.js"></script>
    <script>
        var products_data;
        var total = 0;
        loadJSON('get_products_data', function (response) {
            // Parsing JSON string into object
            products_data = JSON.parse(response);
        });
        loadJSON('get_cart', function (response) {
            // Parsing JSON string into object
            shopping_cart = JSON.parse(response);
            for (pk in shopping_cart) {
                total += shopping_cart[pk].reduce((a, b) => a + b);
            }
        });

        // get the query string
        let params = (new URL(document.location)).searchParams;
        if (params.has('products_key')) {
            var this_product_key = params.get('products_key');
        } else {
            document.write('no products key in query string');
            document.stop;
        }
        nav_bar(this_product_key, products_data);
    </script>
  
  <!DOCTYPE html>
  <html>
  <title>Meghan's Diamond Necklace Store</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="./products_data.js" type="text/javascript"></script>
  <!--link to style sheet template from the w3schools templates-->
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
  <link rel="stylesheet" href="./products_stylesheet.css">
  <!--Setting the font for the document-->

  <!--setting the background image to be the starry.jpg-->
  
  <body style="background-image: url(images/starry.jpg);  background-repeat: no-repeat; background-size:cover;">
  
    <!-- Formatting the Top menu from w3 schools template -->
    <div class="w3-top">
      <div class="w3-white w3-xlarge" style="max-width:1200px;margin:auto; ">
        <div class="w3-center w3-padding-16" style="background-color: palevioletred">Diamond Necklaces for the Perfect
          Gem!</div>
      </div>
    </div>
    <script>
        cart_total.innerHTML = total;
    // This function takes a string assumed to be a key in the products array above to display and select the corresponding products
        var order_str = '';

    //what to do with the form
    order_str += `
    <form action="/process_form" method="POST">`
</script>

      <!-- !PAGE CONTENT! from w3 schools template -->
      <div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px;">

          for (i = 0; i < products_array.length; i++) {
            document.write(`    
      <!-- First Photo Grid and formatt the image size-->
      <!--Display the products, brand, product name, and price-->
      <div class="w3-row-padding w3-padding-16 w3-center" style="background-color:pink">
          <img src="${products_array[i]['image']}"style="width:300px; height: 300px;>
        <div style="width=300px">
        <h2>${products_array[i]['brand']}</h2>
          <p>${products_array[i]['product_name']}</p>
          <p>$${products_array[i]['price']}</p>
        <label>Quantity:</label>
              <input type ="text" name="quantity${i}" onkeyup="checkQuantityTextbox(this);">
              <span id="quantity${i}_message">Enter a quantity</span></p>
  
              `)
  
          }
        </script>
      </div>
      <!--format the purchase button-->
      <input type="submit" value="Purchase"
        style="height:100px; width:300px; margin:auto 0; text-align: center; background-color: palevioletred; font-size: 35px;  font-weight: 700;"
        name="submit_button">
    </form>
    </div>
    <h1>
      <footer>Make life shiny!</footer>
    </h1>
  </body>
  
  </html>